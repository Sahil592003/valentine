<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Ashwini â¤ï¸</title>

<style>
body{
  margin:0;
  overflow:hidden;
  background:#ffe6f0;
  font-family:'Segoe UI',sans-serif;
}

/* Envelope */
#envelope{
  position:absolute;
  top:40%;
  left:50%;
  transform:translateX(-50%);
  font-size:110px;
  cursor:pointer;
  transition:transform 2.5s ease;
}
#envelope.opened{
  transform:translateX(-50%) rotateX(180deg) scale(1.1);
}

/* Card */
.card{
  display:none;
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:white;
  width:320px;
  padding:26px;
  border-radius:20px;
  text-align:center;
  box-shadow:0 10px 25px rgba(0,0,0,0.15);
}

#name{
  font-size:24px;
  color:#ff4d6d;
  margin-bottom:12px;
  font-weight:600;
}

button{
  padding:10px 28px;
  font-size:18px;
  border:none;
  border-radius:30px;
  margin:12px;
}
#yes{background:#ff4d6d;color:white;}
#no{background:#666;color:white;position:relative;}
#replay{background:#ffb3c6;color:#333;}

/* Cursor */
#cursor{
  display:inline-block;
  margin-left:2px;
  animation:blink 1s infinite;
}
@keyframes blink{
  0%,50%,100%{opacity:1}
  25%,75%{opacity:0}
}

/* Popups */
.popup{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.4);
}
.cloud{
  background:#fff;
  width:300px;
  padding:30px;
  border-radius:60px;
  text-align:center;
  margin:40% auto;
  box-shadow:0 10px 25px rgba(0,0,0,0.15);
}

/* Hearts & petals */
.heart,.petal{
  position:absolute;
  font-size:26px;
  animation:fall 7s linear forwards;
}
@keyframes fall{to{top:110%;opacity:0}}
</style>
</head>

<body>

<audio id="openSound" preload="auto">
  <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_2f6e0b6c98.mp3">
</audio>
<audio id="bgMusic" preload="auto" loop>
  <source src="https://cdn.pixabay.com/audio/2023/03/28/audio_2c7b0e4d5b.mp3">
</audio>
<audio id="typeSound" preload="auto">
  <source src="https://cdn.pixabay.com/audio/2022/10/16/audio_66a07b7c94.mp3">
</audio>

<div id="envelope">ğŸ’Œ</div>

<!-- Main Question -->
<div class="card" id="questionCard">
  <div id="name">Ashwini ğŸ’–</div>
  Will you be my Valentine? ğŸ’Œ
  <br><br>
  <button id="yes">Yes</button>
  <button id="no">No</button>
</div>

<!-- Popup 1 -->
<div class="popup" id="p1">
  <div class="cloud">
    Are you sure? ğŸ¥º<br><br>
    <button onclick="popupYes()">Yes</button>
    <button onclick="popupNo1()">No</button>
  </div>
</div>

<!-- Popup 2 -->
<div class="popup" id="p2">
  <div class="cloud">
    Are you really sure? ğŸ’”<br><br>
    <button onclick="popupYes()">Yes</button>
    <button onclick="popupNo2()">No</button>
  </div>
</div>

<!-- Final Letter -->
<div class="card" id="finalCard">
  <div id="name">Ashwini ğŸ’—</div>
  <div id="finalText" style="text-align:left;font-size:16px;line-height:1.8;"></div>
  <span id="cursor">|</span><br><br>
  <button id="replay">ğŸ” Replay</button>
</div>

<script>
const envelope = document.getElementById("envelope");
const questionCard = document.getElementById("questionCard");
const finalCard = document.getElementById("finalCard");
const finalText = document.getElementById("finalText");
const cursor = document.getElementById("cursor");
const noBtn = document.getElementById("no");
const bgMusic = document.getElementById("bgMusic");
const typeSound = document.getElementById("typeSound");

let runawayMode = false;

/* Envelope */
envelope.onclick = () => {
  document.getElementById("openSound").play();
  bgMusic.volume = 0.25;
  bgMusic.play();
  envelope.classList.add("opened");
  setTimeout(()=>{
    envelope.style.display="none";
    questionCard.style.display="block";
  },2000);
};

/* YES from main */
document.getElementById("yes").onclick = finalYes;

/* NO from main */
noBtn.onclick = () => {
  if(runawayMode) return;
  document.getElementById("p1").style.display="block";
};

/* Popup logic */
function popupYes(){
  document.getElementById("p1").style.display="none";
  document.getElementById("p2").style.display="none";
  finalYes();
}

function popupNo1(){
  document.getElementById("p1").style.display="none";
  document.getElementById("p2").style.display="block";
}

function popupNo2(){
  document.getElementById("p2").style.display="none";
  runawayMode = true;
  questionCard.style.display="block";
  noBtn.onmouseover = () => {
    noBtn.style.position="absolute";
    noBtn.style.left = Math.random()*80+"%";
    noBtn.style.top = Math.random()*80+"%";
  };
}

/* Final YES */
function finalYes(){
  questionCard.style.display="none";
  hearts(); petals();
  setTimeout(()=>{
    finalCard.style.display="block";
    fadeMusic();
    typeLetter();
  },1200);
}

/* Typing */
const message = `ğŸŒ¸ Hey Ashwini,

I know I havenâ€™t always been perfect.
I know I made mistakes that hurt you ğŸ’”

But one thing never changed â€”
my feelings for you â¤ï¸

I donâ€™t promise perfection,
but I promise honesty, effort, patience,
and a heart that chooses you every single day ğŸ¤

No pressure. No forcing.
Just a genuine heart asking â€”
can we walk this journey together? ğŸ’–`;

function typeLetter(){
  finalText.innerHTML="";
  cursor.style.display="inline";
  let i=0, temp="";
  typeSound.volume=0.15;
  typeSound.play();
  const interval=setInterval(()=>{
    temp += message[i];
    finalText.innerHTML = temp.replace(/\n/g,"<br>");
    i++;
    if(i>=message.length){
      clearInterval(interval);
      typeSound.pause();
      typeSound.currentTime=0;
    }
  },45);
}

/* Fade music */
function fadeMusic(){
  const f=setInterval(()=>{
    if(bgMusic.volume>0.02) bgMusic.volume-=0.02;
    else{ bgMusic.pause(); clearInterval(f); }
  },300);
}

/* Replay */
document.getElementById("replay").onclick = () => location.reload();

/* Effects */
function hearts(){
  setInterval(()=>{
    const h=document.createElement("div");
    h.className="heart";
    h.innerText="â¤ï¸";
    h.style.left=Math.random()*100+"%";
    h.style.top="0";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),7000);
  },300);
}
function petals(){
  setInterval(()=>{
    const p=document.createElement("div");
    p.className="petal";
    p.innerText="ğŸŒ¸";
    p.style.left=Math.random()*100+"%";
    p.style.top="0";
    document.body.appendChild(p);
    setTimeout(()=>p.remove(),7000);
  },400);
}
</script>

</body>
</html>
